var t=Object.defineProperty,e=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,a=(t,e)=>{for(var n in e||(e={}))s.call(e,n)&&o(t,n,e[n]);if(r)for(var n of r(e))i.call(e,n)&&o(t,n,e[n]);return t},c=(t,r)=>e(t,n(r)),u=(t,e)=>{var n={};for(var o in t)s.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&r)for(var o of r(t))e.indexOf(o)<0&&i.call(t,o)&&(n[o]=t[o]);return n},l=(t,e,n)=>new Promise(((r,s)=>{var i=t=>{try{a(n.next(t))}catch(e){s(e)}},o=t=>{try{a(n.throw(t))}catch(e){s(e)}},a=t=>t.done?r(t.value):Promise.resolve(t.value).then(i,o);a((n=n.apply(t,e)).next())}));const p="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof window&&window||"undefined"!=typeof global&&global||{};class d{constructor(t){if(this._entries=[],t)if("string"!=typeof t)Array.isArray(t)?t.forEach((([t,e])=>this.append(t,e))):Object.keys(t).forEach((e=>{const n=t[e];null!=n&&this.append(e,String(n))}));else{const e=t.startsWith("?")?t.slice(1):t;e.length>0&&e.split("&").forEach((t=>{if(!t)return;const[e,n=""]=t.split("=");this.append(decodeURIComponent(e),decodeURIComponent(n))}))}}append(t,e){this._entries.push([t,e])}toString(){return this._entries.map((([t,e])=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&")}}p.URLSearchParams||(p.URLSearchParams=d);const h="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,f=globalThis,m="10.27.0";function g(){return _(f),f}function _(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||m,e[m]=e[m]||{}}function v(t,e,n=f){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[m]=r[m]||{};return s[t]||(s[t]=e())}const y={};function b(t){if(!("console"in f))return t();const e=f.console,n={},r=Object.keys(y);r.forEach((t=>{const r=y[t];n[t]=e[t],e[t]=r}));try{return t()}finally{r.forEach((t=>{e[t]=n[t]}))}}function S(){return x().enabled}function E(t,...e){h&&S()&&b((()=>{f.console[t](`Sentry Logger [${t}]:`,...e)}))}function x(){return h?v("loggerSettings",(()=>({enabled:!1}))):{enabled:!1}}const w={enable:function(){x().enabled=!0},disable:function(){x().enabled=!1},isEnabled:S,log:function(...t){E("log",...t)},warn:function(...t){E("warn",...t)},error:function(...t){E("error",...t)}},k="<anonymous>";const T=Object.prototype.toString;function I(t){switch(T.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return D(t,Error)}}function O(t,e){return T.call(t)===`[object ${e}]`}function C(t){return O(t,"DOMError")}function j(t){return O(t,"String")}function P(t){return"object"==typeof t&&null!==t&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function $(t){return null===t||P(t)||"object"!=typeof t&&"function"!=typeof t}function N(t){return O(t,"Object")}function M(t){return"undefined"!=typeof Event&&D(t,Event)}function R(t){return Boolean((null==t?void 0:t.then)&&"function"==typeof t.then)}function D(t,e){try{return t instanceof e}catch(n){return!1}}const A=f;function L(t,e){const n=t,r=[];if(!(null==n?void 0:n.tagName))return"";if(A.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=(null==e?void 0:e.length)?e.filter((t=>n.getAttribute(t))).map((t=>[t,n.getAttribute(t)])):null;if(null==s?void 0:s.length)s.forEach((t=>{r.push(`[${t[0]}="${t[1]}"]`)}));else{n.id&&r.push(`#${n.id}`);const t=n.className;if(t&&j(t)){const e=t.split(/\s+/);for(const t of e)r.push(`.${t}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const t=n.getAttribute(o);t&&r.push(`[${o}="${t}"]`)}return r.join("")}function F(t,e,n){if(!(e in t))return;const r=t[e];if("function"!=typeof r)return;const s=n(r);"function"==typeof s&&U(s,r);try{t[e]=s}catch(i){h&&w.log(`Failed to replace method "${e}" in object`,t)}}function H(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch(r){h&&w.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function U(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,H(t,"__sentry_original__",e)}catch(n){}}function B(t){return t.__sentry_original__}function W(t){if(I(t))return a({message:t.message,name:t.name,stack:t.stack},G(t));if(M(t)){const e=a({type:t.type,target:q(t.target),currentTarget:q(t.currentTarget)},G(t));return"undefined"!=typeof CustomEvent&&D(t,CustomEvent)&&(e.detail=t.detail),e}return t}function q(t){try{return e=t,"undefined"!=typeof Element&&D(e,Element)?function(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,p=!Array.isArray(e)&&e.maxStringLength||80;for(;n&&i++<r&&(u=L(n,l),!("html"===u||i>1&&o+s.length*c+u.length>=p));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch(n){return"<unknown>"}}(t):Object.prototype.toString.call(t)}catch(n){return"<unknown>"}var e}function G(t){if("object"==typeof t&&null!==t){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function z(t){const e=Object.keys(W(t));return e.sort(),e[0]?e.join(", "):"[object has no keys]"}function J(t){return K(t,/* @__PURE__ */new Map)}function K(t,e){if(null===t||"object"!=typeof t)return t;const n=e.get(t);if(void 0!==n)return n;if(Array.isArray(t)){const n=[];return e.set(t,n),t.forEach((t=>{n.push(K(t,e))})),n}if(function(t){const e=t.constructor;return e===Object||void 0===e}(t)){const n={};e.set(t,n);return Object.keys(t).forEach((r=>{const s=t[r];void 0!==s&&(n[r]=K(s,e))})),n}return t}function V(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.slice(0,e)}...`}function Y(t,e,n=!1){return!!j(t)&&(O(e,"RegExp")?e.test(t):!!j(e)&&(n?t===e:t.includes(e)))}function X(t,e=[],n=!1){return e.some((e=>Y(t,e,n)))}let Z;function Q(t=function(){const t=f;return t.crypto||t.msCrypto}()){try{if(null==t?void 0:t.randomUUID)return t.randomUUID().replace(/-/g,"")}catch(e){}return Z||(Z="10000000100040008000100000000000"),Z.replace(/[018]/g,(t=>(t^(16*Math.random()&15)>>t/4).toString(16)))}function et(t){var e,n;return null==(n=null==(e=t.exception)?void 0:e.values)?void 0:n[0]}function nt(t){const{message:e,event_id:n}=t;if(e)return e;const r=et(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function rt(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function st(t,e){const n=et(t);if(!n)return;const r=n.mechanism;if(n.mechanism=a(a(a({},{type:"generic",handled:!0}),r),e),e&&"data"in e){const t=a(a({},null==r?void 0:r.data),e.data);n.mechanism.data=t}}function it(t){if(function(t){try{return t.__sentry_captured__}catch(e){}}(t))return!0;try{H(t,"__sentry_captured__",!0)}catch(e){}return!1}function ot(){return Date.now()/1e3}let at;function ct(){return(null!=at?at:at=function(){const{performance:t}=f;if(!(null==t?void 0:t.now)||!t.timeOrigin)return ot;const e=t.timeOrigin;return()=>(e+t.now())/1e3}())()}function ut(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||ct(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:Q()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{const e=t.timestamp-t.started;t.duration=e>=0?e:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}function lt(t,e,n=2){if(!e||"object"!=typeof e||n<=0)return e;if(t&&0===Object.keys(e).length)return t;const r=a({},t);for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=lt(r[s],e[s],n-1));return r}function pt(){return Q()}function dt(){return Q().substring(16)}const ht="_sentrySpan";function ft(t,e){e?H(t,ht,e):delete t[ht]}function mt(t){return t[ht]}class gt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:pt(),sampleRand:Math.random()}}clone(){const t=new gt;return t._breadcrumbs=[...this._breadcrumbs],t._tags=a({},this._tags),t._attributes=a({},this._attributes),t._extra=a({},this._extra),t._contexts=a({},this._contexts),this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata=a({},this._sdkProcessingMetadata),t._propagationContext=a({},this._propagationContext),t._client=this._client,t._lastEventId=this._lastEventId,ft(t,mt(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ut(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags=a(a({},this._tags),t),this._notifyScopeListeners(),this}setTag(t,e){return this.setTags({[t]:e})}setAttributes(t){return this._attributes=a(a({},this._attributes),t),this._notifyScopeListeners(),this}setAttribute(t,e){return this.setAttributes({[t]:e})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra=a(a({},this._extra),t),this._notifyScopeListeners(),this}setExtra(t,e){return this._extra=c(a({},this._extra),{[t]:e}),this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,e){return null===e?delete this._contexts[t]:this._contexts[t]=e,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const e="function"==typeof t?t(this):t,n=e instanceof gt?e.getScopeData():N(e)?t:void 0,{tags:r,attributes:s,extra:i,user:o,contexts:c,level:u,fingerprint:l=[],propagationContext:p}=n||{};return this._tags=a(a({},this._tags),r),this._attributes=a(a({},this._attributes),s),this._extra=a(a({},this._extra),i),this._contexts=a(a({},this._contexts),c),o&&Object.keys(o).length&&(this._user=o),u&&(this._level=u),l.length&&(this._fingerprint=l),p&&(this._propagationContext=p),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,ft(this,void 0),this._attachments=[],this.setPropagationContext({traceId:pt(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,e){var n;const r="number"==typeof e?e:100;if(r<=0)return this;const s=c(a({timestamp:ot()},t),{message:t.message?V(t.message,2048):t.message});return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),null==(n=this._client)||n.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:mt(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=lt(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,e){const n=(null==e?void 0:e.event_id)||Q();if(!this._client)return h&&w.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(t,c(a({originalException:t,syntheticException:r},e),{event_id:n}),this),n}captureMessage(t,e,n){var r;const s=(null==n?void 0:n.event_id)||Q();if(!this._client)return h&&w.warn("No client configured on scope - will not capture message!"),s;const i=null!=(r=null==n?void 0:n.syntheticException)?r:new Error(t);return this._client.captureMessage(t,e,c(a({originalException:t,syntheticException:i},n),{event_id:s}),this),s}captureEvent(t,e){const n=(null==e?void 0:e.event_id)||Q();return this._client?(this._client.captureEvent(t,c(a({},e),{event_id:n}),this),n):(h&&w.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((t=>{t(this)})),this._notifyingListeners=!1)}}class _t{constructor(t,e){let n,r;n=t||new gt,r=e||new gt,this._stack=[{scope:n}],this._isolationScope=r}withScope(t){const e=this._pushScope();let n;try{n=t(e)}catch(r){throw this._popScope(),r}return R(n)?n.then((t=>(this._popScope(),t)),(t=>{throw this._popScope(),t})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function vt(){const t=_(g());return t.stack=t.stack||new _t(v("defaultCurrentScope",(()=>new gt)),v("defaultIsolationScope",(()=>new gt)))}function yt(t){return vt().withScope(t)}function bt(t,e){const n=vt();return n.withScope((()=>(n.getStackTop().scope=t,e(t))))}function St(t){return vt().withScope((()=>t(vt().getIsolationScope())))}function Et(t){const e=_(t);return e.acs?e.acs:{withIsolationScope:St,withScope:yt,withSetScope:bt,withSetIsolationScope:(t,e)=>St(e),getCurrentScope:()=>vt().getScope(),getIsolationScope:()=>vt().getIsolationScope()}}function xt(){return Et(g()).getCurrentScope()}function wt(){return Et(g()).getIsolationScope()}function kt(){return v("globalScope",(()=>new gt))}function Tt(...t){const e=Et(g());if(2===t.length){const[n,r]=t;return n?e.withSetScope(n,r):e.withScope(r)}return e.withScope(t[0])}function It(){return xt().getClient()}function Ot(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=e,i={trace_id:n,span_id:s||dt()};return r&&(i.parent_span_id=r),i}const Ct="sentry.profile_id",jt="sentry.exclusive_time";function Pt(t){if(t){if("object"==typeof t&&"deref"in t&&"function"==typeof t.deref)try{return t.deref()}catch(e){return}return t}}function $t(t){const e=t;return{scope:e._sentryScope,isolationScope:Pt(e._sentryIsolationScope)}}const Nt=/^sentry-/;function Mt(t){const e=function(t){if(!t||!j(t)&&!Array.isArray(t))return;if(Array.isArray(t))return t.reduce(((t,e)=>{const n=Rt(e);return Object.entries(n).forEach((([e,n])=>{t[e]=n})),t}),{});return Rt(t)}(t);if(!e)return;const n=Object.entries(e).reduce(((t,[e,n])=>{if(e.match(Nt)){t[e.slice(7)]=n}return t}),{});return Object.keys(n).length>0?n:void 0}function Rt(t){return t.split(",").map((t=>{const e=t.indexOf("=");if(-1===e)return[];return[t.slice(0,e),t.slice(e+1)].map((t=>{try{return decodeURIComponent(t.trim())}catch(e){return}}))})).reduce(((t,[e,n])=>(e&&n&&(t[e]=n),t)),{})}const Dt=/^o(\d+)\./,At=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Lt(t,e=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${o}`}function Ft(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Ht(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=function(t){const e=t.match(Dt);return null==e?void 0:e[1]}(n)),r}function Ut(t){const e="string"==typeof t?function(t){const e=At.exec(t);if(!e)return void b((()=>{console.error(`Invalid Sentry Dsn: ${t}`)}));const[n,r,s="",i="",o="",a=""]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const t=u.match(/^\d+/);t&&(u=t[0])}return Ft({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}(t):Ft(t);if(e&&function(t){if(!h)return!0;const{port:e,projectId:n,protocol:r}=t;return!(["protocol","publicKey","host","projectId"].find((e=>!t[e]&&(w.error(`Invalid Sentry Dsn: ${e} missing`),!0)))||(n.match(/^\d+$/)?function(t){return"http"===t||"https"===t}(r)?e&&isNaN(parseInt(e,10))&&(w.error(`Invalid Sentry Dsn: Invalid port ${e}`),1):(w.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),1):(w.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(e))return e}function Bt(t){if("boolean"==typeof t)return Number(t);const e="string"==typeof t?parseFloat(t):t;return"number"!=typeof e||isNaN(e)||e<0||e>1?void 0:e}let Wt=!1;function qt(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),s=r?e:Kt(t).parent_span_id,i=$t(t).scope;return{parent_span_id:s,span_id:r?(null==i?void 0:i.getPropagationContext().propagationSpanId)||dt():e,trace_id:n}}function Gt(t){return t&&t.length>0?t.map((t=>{var e=t,{context:n}=e,r=n,{spanId:s,traceId:i,traceFlags:o}=r,c=u(r,["spanId","traceId","traceFlags"]),{attributes:l}=e;return a({span_id:s,trace_id:i,sampled:1===o,attributes:l},c)})):void 0}function zt(t){return"number"==typeof t?Jt(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Jt(t.getTime()):ct()}function Jt(t){return t>9999999999?t/1e3:t}function Kt(t){var e;if(function(t){return"function"==typeof t.getSpanJSON}(t))return t.getSpanJSON();const{spanId:n,traceId:r}=t.spanContext();if(function(t){const e=t;return!!(e.attributes&&e.startTime&&e.name&&e.endTime&&e.status)}(t)){const{attributes:s,startTime:i,name:o,endTime:a,status:c,links:u}=t;return{span_id:n,trace_id:r,data:s,description:o,parent_span_id:"parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?null==(e=t.parentSpanContext)?void 0:e.spanId:void 0,start_timestamp:zt(i),timestamp:zt(a)||void 0,status:Vt(c),op:s["sentry.op"],origin:s["sentry.origin"],links:Gt(u)}}return{span_id:n,trace_id:r,start_timestamp:0,data:{}}}function Vt(t){if(t&&0!==t.code)return 1===t.code?"ok":t.message||"internal_error"}function Yt(t){return t._sentryRootSpan||t}function Xt(){Wt||(b((()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")})),Wt=!0)}function Zt(t){var e;if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const n=t||(null==(e=It())?void 0:e.getOptions());return!(!n||null==n.tracesSampleRate&&!n.tracesSampler)}function Qt(t){w.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function te(t,e){if(!(null==e?void 0:e.length)||!t.description)return!1;for(const r of e){if("string"==typeof(n=r)||n instanceof RegExp){if(Y(t.description,r))return h&&Qt(t),!0;continue}if(!r.name&&!r.op)continue;const e=!r.name||Y(t.description,r.name),s=!r.op||t.op&&Y(t.op,r.op);if(e&&s)return h&&Qt(t),!0}var n;return!1}function ee(t,e){const n=e.parent_span_id,r=e.span_id;if(n)for(const s of t)s.parent_span_id===r&&(s.parent_span_id=n)}const ne="production";function re(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},s={environment:n.environment||ne,release:n.release,public_key:r,trace_id:t,org_id:Ht(e)};return e.emit("createDsc",s),s}function se(t,e){const n=e.getPropagationContext();return n.dsc||re(n.traceId,t)}function ie(t){var e,n,r,s;const i=It();if(!i)return{};const o=Yt(t),a=Kt(o),c=a.data,u=o.spanContext().traceState,l=null!=(n=null!=(e=null==u?void 0:u.get("sentry.sample_rate"))?e:c["sentry.sample_rate"])?n:c["sentry.previous_trace_sample_rate"];function p(t){return"number"!=typeof l&&"string"!=typeof l||(t.sample_rate=`${l}`),t}const d=o._frozenDsc;if(d)return p(d);const h=null==u?void 0:u.get("sentry.dsc"),f=h&&Mt(h);if(f)return p(f);const m=re(t.spanContext().traceId,i),g=c["sentry.source"],_=a.description;return"url"!==g&&_&&(m.transaction=_),Zt()&&(m.sampled=String(function(t){const{traceFlags:e}=t.spanContext();return 1===e}(o)),m.sample_rand=null!=(s=null==u?void 0:u.get("sentry.sample_rand"))?s:null==(r=$t(o).scope)?void 0:r.getPropagationContext().sampleRand.toString()),p(m),i.emit("createDsc",m,o),m}function oe(t,e=100,n=1/0){try{return ce("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function ae(t,e=3,n=102400){const r=oe(t,e);return s=r,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(s))>n?ae(t,e-1,n):r;var s}function ce(t,e,n=1/0,r=1/0,s=function(){const t=/* @__PURE__ */new WeakSet;function e(e){return!!t.has(e)||(t.add(e),!1)}function n(e){t.delete(e)}return[e,n]}()){const[i,o]=s;if(null==e||["boolean","string"].includes(typeof e)||"number"==typeof e&&Number.isFinite(e))return e;const a=function(t,e){try{if("domain"===t&&e&&"object"==typeof e&&e._events)return"[Domain]";if("domainEmitter"===t)return"[DomainEmitter]";if("undefined"!=typeof global&&e===global)return"[Global]";if("undefined"!=typeof window&&e===window)return"[Window]";if("undefined"!=typeof document&&e===document)return"[Document]";if("object"==typeof(n=e)&&null!==n&&(n.__isVue||n._isVue||n.__v_isVNode))return function(t){return"__v_isVNode"in t&&t.__v_isVNode?"[VueVNode]":"[VueViewModel]"}(e);if(function(t){return N(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}(e))return"[SyntheticEvent]";if("number"==typeof e&&!Number.isFinite(e))return`[${e}]`;if("function"==typeof e)return`[Function: ${function(t){try{return t&&"function"==typeof t&&t.name||k}catch(e){return k}}(e)}]`;if("symbol"==typeof e)return`[${String(e)}]`;if("bigint"==typeof e)return`[BigInt: ${String(e)}]`;const r=function(t){const e=Object.getPrototypeOf(t);return(null==e?void 0:e.constructor)?e.constructor.name:"null prototype"}(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}var n}(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c="number"==typeof e.__sentry_override_normalization_depth__?e.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(i(e))return"[Circular ~]";const u=e;if(u&&"function"==typeof u.toJSON)try{return ce("",u.toJSON(),c-1,r,s)}catch(h){}const l=Array.isArray(e)?[]:{};let p=0;const d=W(e);for(const f in d){if(!Object.prototype.hasOwnProperty.call(d,f))continue;if(p>=r){l[f]="[MaxProperties ~]";break}const t=d[f];l[f]=ce(f,t,c-1,r,s),p++}return o(e),l}function ue(t,e=[]){return[t,e]}function le(t,e){const[n,r]=t;return[n,[...r,e]]}function pe(t,e){const n=t[1];for(const r of n){if(e(r,r[0].type))return!0}return!1}function de(t){const e=_(f);return e.encodePolyfill?e.encodePolyfill(t):(new TextEncoder).encode(t)}function he(t){const[e,n]=t;let r=JSON.stringify(e);function s(t){"string"==typeof r?r="string"==typeof t?r+t:[de(r),t]:r.push("string"==typeof t?de(t):t)}for(const o of n){const[t,e]=o;if(s(`\n${JSON.stringify(t)}\n`),"string"==typeof e||e instanceof Uint8Array)s(e);else{let t;try{t=JSON.stringify(e)}catch(i){t=JSON.stringify(oe(e))}s(t)}}return"string"==typeof r?r:function(t){const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}(r)}function fe(t){const e="string"==typeof t.data?de(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const me={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function ge(t){return me[t]}function _e(t){if(!(null==t?void 0:t.sdk))return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function ve(t,e,n,r){const s=_e(n),i=t.type&&"replay_event"!==t.type?t.type:"event";!function(t,e){var n,r,s,i;if(!e)return t;const o=t.sdk||{};t.sdk=c(a({},o),{name:o.name||e.name,version:o.version||e.version,integrations:[...(null==(n=t.sdk)?void 0:n.integrations)||[],...e.integrations||[]],packages:[...(null==(r=t.sdk)?void 0:r.packages)||[],...e.packages||[]],settings:(null==(s=t.sdk)?void 0:s.settings)||e.settings?a(a({},null==(i=t.sdk)?void 0:i.settings),e.settings):void 0})}(t,null==n?void 0:n.sdk);const o=function(t,e,n,r){var s;const i=null==(s=t.sdkProcessingMetadata)?void 0:s.dynamicSamplingContext;return a(a(a({event_id:t.event_id,sent_at:/* @__PURE__ */(new Date).toISOString()},e&&{sdk:e}),!!n&&r&&{dsn:Lt(r)}),i&&{trace:i})}(t,s,r,e);delete t.sdkProcessingMetadata;return ue(o,[[{type:i},t]])}function ye(t){return new Se((e=>{e(t)}))}function be(t){return new Se(((e,n)=>{n(t)}))}class Se{constructor(t){this._state=0,this._handlers=[],this._runExecutor(t)}then(t,e){return new Se(((n,r)=>{this._handlers.push([!1,e=>{if(t)try{n(t(e))}catch(s){r(s)}else n(e)},t=>{if(e)try{n(e(t))}catch(s){r(s)}else r(t)}]),this._executeHandlers()}))}catch(t){return this.then((t=>t),t)}finally(t){return new Se(((e,n)=>{let r,s;return this.then((e=>{s=!1,r=e,t&&t()}),(e=>{s=!0,r=e,t&&t()})).then((()=>{s?n(r):e(r)}))}))}_executeHandlers(){if(0===this._state)return;const t=this._handlers.slice();this._handlers=[],t.forEach((t=>{t[0]||(1===this._state&&t[1](this._value),2===this._state&&t[2](this._value),t[0]=!0)}))}_runExecutor(t){const e=(t,e)=>{0===this._state&&(R(e)?e.then(n,r):(this._state=t,this._value=e,this._executeHandlers()))},n=t=>{e(1,t)},r=t=>{e(2,t)};try{t(n,r)}catch(s){r(s)}}}function Ee(t,e,n,r=0){try{const s=xe(e,n,t,r);return R(s)?s:ye(s)}catch(s){return be(s)}}function xe(t,e,n,r){const s=n[r];if(!t||!s)return t;const i=s(a({},t),e);return h&&null===i&&w.log(`Event processor "${s.id||"?"}" dropped event`),R(i)?i.then((t=>xe(t,e,n,r+1))):xe(i,e,n,r+1)}function we(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=e;!function(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:c}=e;Object.keys(n).length&&(t.extra=a(a({},n),t.extra));Object.keys(r).length&&(t.tags=a(a({},r),t.tags));Object.keys(s).length&&(t.user=a(a({},s),t.user));Object.keys(i).length&&(t.contexts=a(a({},i),t.contexts));o&&(t.level=o);c&&"transaction"!==t.type&&(t.transaction=c)}(t,e),r&&function(t,e){t.contexts=a({trace:qt(e)},t.contexts),t.sdkProcessingMetadata=a({dynamicSamplingContext:ie(e)},t.sdkProcessingMetadata);const n=Yt(e),r=Kt(n).description;r&&!t.transaction&&"transaction"===t.type&&(t.transaction=r)}(t,r),function(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e));t.fingerprint.length||delete t.fingerprint}(t,n),function(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}(t,s),function(t,e){t.sdkProcessingMetadata=a(a({},t.sdkProcessingMetadata),e)}(t,i)}function ke(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:l,eventProcessors:p,attachments:d,propagationContext:h,transactionName:f,span:m}=e;Te(t,"extra",n),Te(t,"tags",r),Te(t,"user",s),Te(t,"contexts",i),t.sdkProcessingMetadata=lt(t.sdkProcessingMetadata,c,2),o&&(t.level=o),f&&(t.transactionName=f),m&&(t.span=m),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),l.length&&(t.fingerprint=[...t.fingerprint,...l]),p.length&&(t.eventProcessors=[...t.eventProcessors,...p]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext=a(a({},t.propagationContext),h)}function Te(t,e,n){t[e]=lt(t[e],n,1)}let Ie,Oe,Ce,je;function Pe(t,e,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:u=1e3}=t,l=c(a({},e),{event_id:e.event_id||n.event_id||Q(),timestamp:e.timestamp||ot()}),p=n.integrations||t.integrations.map((t=>t.name));!function(t,e){var n,r;const{environment:s,release:i,dist:o,maxValueLength:a}=e;t.environment=t.environment||s||ne,!t.release&&i&&(t.release=i);!t.dist&&o&&(t.dist=o);const c=t.request;(null==c?void 0:c.url)&&a&&(c.url=V(c.url,a));a&&(null==(r=null==(n=t.exception)?void 0:n.values)||r.forEach((t=>{t.value&&(t.value=V(t.value,a))})))}(l,t),function(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}(l,p),s&&s.emit("applyFrameMetadata",e),void 0===e.type&&function(t,e){var n,r;const s=function(t){const e=f._sentryDebugIds,n=f._debugIds;if(!e&&!n)return{};const r=e?Object.keys(e):[],s=n?Object.keys(n):[];if(je&&r.length===Oe&&s.length===Ce)return je;Oe=r.length,Ce=s.length,je={},Ie||(Ie={});const i=(e,n)=>{for(const r of e){const e=n[r],s=null==Ie?void 0:Ie[r];if(s&&je&&e)je[s[0]]=e,Ie&&(Ie[r]=[s[0],e]);else if(e){const n=t(r);for(let t=n.length-1;t>=0;t--){const s=n[t],i=null==s?void 0:s.filename;if(i&&je&&Ie){je[i]=e,Ie[r]=[i,e];break}}}}};return e&&i(r,e),n&&i(s,n),je}(e);null==(r=null==(n=t.exception)?void 0:n.values)||r.forEach((t=>{var e,n;null==(n=null==(e=t.stacktrace)?void 0:e.frames)||n.forEach((t=>{t.filename&&(t.debug_id=s[t.filename])}))}))}(l,t.stackParser);const d=function(t,e){if(!e)return t;const n=t?t.clone():new gt;return n.update(e),n}(r,n.captureContext);n.mechanism&&st(l,n.mechanism);const h=s?s.getEventProcessors():[],m=kt().getScopeData();if(i){ke(m,i.getScopeData())}if(d){ke(m,d.getScopeData())}const g=[...n.attachments||[],...m.attachments];g.length&&(n.attachments=g),we(l,m);return Ee([...h,...m.eventProcessors],l,n).then((t=>(t&&function(t){var e,n;const r={};if(null==(n=null==(e=t.exception)?void 0:e.values)||n.forEach((t=>{var e,n;null==(n=null==(e=t.stacktrace)?void 0:e.frames)||n.forEach((t=>{t.debug_id&&(t.abs_path?r[t.abs_path]=t.debug_id:t.filename&&(r[t.filename]=t.debug_id),delete t.debug_id)}))})),0===Object.keys(r).length)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const s=t.debug_meta.images;Object.entries(r).forEach((([t,e])=>{s.push({type:"sourcemap",code_file:t,debug_id:e})}))}(t),"number"==typeof o&&o>0?function(t,e,n){var r,s;if(!t)return null;const i=a(a(a(a(a({},t),t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((t=>a(a({},t),t.data&&{data:oe(t.data,e,n)})))}),t.user&&{user:oe(t.user,e,n)}),t.contexts&&{contexts:oe(t.contexts,e,n)}),t.extra&&{extra:oe(t.extra,e,n)});(null==(r=t.contexts)?void 0:r.trace)&&i.contexts&&(i.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(i.contexts.trace.data=oe(t.contexts.trace.data,e,n)));t.spans&&(i.spans=t.spans.map((t=>a(a({},t),t.data&&{data:oe(t.data,e,n)}))));(null==(s=t.contexts)?void 0:s.flags)&&i.contexts&&(i.contexts.flags=oe(t.contexts.flags,3,n));return i}(t,o,u):t)))}function $e(t){if(t)return function(t){return t instanceof gt||"function"==typeof t}(t)||function(t){return Object.keys(t).some((t=>Ne.includes(t)))}(t)?{captureContext:t}:t}const Ne=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Me(t,e){return xt().captureException(t,$e(e))}function Re(t,e){const n="string"==typeof e?e:void 0,r="string"!=typeof e?{captureContext:e}:void 0;return xt().captureMessage(t,n,r)}function De(t,e){return xt().captureEvent(t,e)}function Ae(t,e){wt().setContext(t,e)}function Le(t){wt().setExtras(t)}function Fe(t,e){wt().setExtra(t,e)}function He(t){wt().setTags(t)}function Ue(t,e){wt().setTag(t,e)}function Be(t){wt().setUser(t)}function We(){return wt().lastEventId()}function qe(t){wt().addEventProcessor(t)}function Ge(t,e,n){return e||`${function(t){return`${function(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}(t)}${t.projectId}/envelope/`}(t)}?${function(t,e){const n={sentry_version:"7"};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}(t,n)}`}const ze=[];function Je(t,e){for(const n of e)(null==n?void 0:n.afterAllSetup)&&n.afterAllSetup(t)}function Ke(t,e,n){if(n[e.name])h&&w.log(`Integration skipped because it was already installed: ${e.name}`);else{if(n[e.name]=e,ze.includes(e.name)||"function"!=typeof e.setupOnce||(e.setupOnce(),ze.push(e.name)),e.setup&&"function"==typeof e.setup&&e.setup(t),"function"==typeof e.preprocessEvent){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",((e,r)=>n(e,r,t)))}if("function"==typeof e.processEvent){const n=e.processEvent.bind(e),r=Object.assign(((e,r)=>n(e,r,t)),{id:e.name});t.addEventProcessor(r)}h&&w.log(`Integration installed: ${e.name}`)}}function Ve(t,e){return e?Tt(e,(()=>{const n=function(){const t=Et(g());return t.getActiveSpan?t.getActiveSpan():mt(xt())}(),r=n?qt(n):Ot(e);return[n?ie(n):se(t,e),r]})):[void 0,void 0]}const Ye={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function Xe(t,e,n,r=!0){!n||t[e]&&!r||(t[e]=n)}function Ze(t,e){const n=nn(),r=en(t);void 0===r?n.set(t,[e]):r.length>=100?(tn(t,r),n.set(t,[e])):n.set(t,[...r,e])}function Qe(t,e=xt(),n=Ze){var r,s,i;const o=null!=(r=null==e?void 0:e.getClient())?r:It();if(!o)return void(h&&w.warn("No client available to capture log."));const{release:u,environment:l,enableLogs:p=!1,beforeSendLog:d}=o.getOptions();if(!p)return void(h&&w.warn("logging option not enabled, log will not be captured."));const[,f]=Ve(o,e),m=a({},t.attributes),{user:{id:g,email:_,username:v}}=function(t){const e=kt().getScopeData();return ke(e,wt().getScopeData()),ke(e,t.getScopeData()),e}(e);Xe(m,"user.id",g,!1),Xe(m,"user.email",_,!1),Xe(m,"user.name",v,!1),Xe(m,"sentry.release",u),Xe(m,"sentry.environment",l);const{name:y,version:S}=null!=(i=null==(s=o.getSdkMetadata())?void 0:s.sdk)?i:{};Xe(m,"sentry.sdk.name",y),Xe(m,"sentry.sdk.version",S);const E=o.getIntegrationByName("Replay"),x=null==E?void 0:E.getReplayId(!0);Xe(m,"sentry.replay_id",x),x&&"buffer"===(null==E?void 0:E.getRecordingMode())&&Xe(m,"sentry._internal.replay_is_buffering",!0);const k=t.message;if(P(k)){const{__sentry_template_string__:t,__sentry_template_values__:e=[]}=k;(null==e?void 0:e.length)&&(m["sentry.message.template"]=t),e.forEach(((t,e)=>{m[`sentry.message.parameter.${e}`]=t}))}const T=mt(e);Xe(m,"sentry.trace.parent_span_id",null==T?void 0:T.spanContext().spanId);const I=c(a({},t),{attributes:m});o.emit("beforeCaptureLog",I);const O=d?b((()=>d(I))):I;if(!O)return o.recordDroppedEvent("before_send","log_item",1),void(h&&w.warn("beforeSendLog returned null, log will not be captured."));const{level:C,message:j,attributes:$={},severityNumber:N}=O,M={timestamp:ct(),level:C,body:j,trace_id:null==f?void 0:f.trace_id,severity_number:null!=N?N:Ye[C],attributes:Object.keys($).reduce(((t,e)=>(t[e]=function(t){var e;switch(typeof t){case"number":return Number.isInteger(t)?{value:t,type:"integer"}:{value:t,type:"double"};case"boolean":return{value:t,type:"boolean"};case"string":return{value:t,type:"string"};default:{let r="";try{r=null!=(e=JSON.stringify(t))?e:""}catch(n){}return{value:r,type:"string"}}}}($[e]),t)),{})};n(o,M),o.emit("afterCaptureLog",O)}function tn(t,e){var n;const r=null!=(n=null!=e?e:en(t))?n:[];if(0===r.length)return;const s=t.getOptions(),i=function(t,e,n,r){const s={};return(null==e?void 0:e.sdk)&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(s.dsn=Lt(r)),ue(s,[(i=t,[{type:"log",item_count:i.length,content_type:"application/vnd.sentry.items.log+json"},{items:i}])]);var i}(r,s._metadata,s.tunnel,t.getDsn());nn().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(i)}function en(t){return nn().get(t)}function nn(){return v("clientToLogBufferMap",(()=>/* @__PURE__ */new WeakMap))}function rn(t){var e;switch(typeof t){case"number":return Number.isInteger(t)?{value:t,type:"integer"}:{value:t,type:"double"};case"boolean":return{value:t,type:"boolean"};case"string":return{value:t,type:"string"};default:{let r="";try{r=null!=(e=JSON.stringify(t))?e:""}catch(n){}return{value:r,type:"string"}}}}function sn(t,e,n,r=!0){!n||!r&&e in t||(t[e]=n)}function on(t,e){const n=pn(),r=ln(t);void 0===r?n.set(t,[e]):r.length>=1e3?(un(t,r),n.set(t,[e])):n.set(t,[...r,e])}function an(t,e,n){var r,s;const{release:i,environment:o}=e.getOptions(),u=a({},t.attributes),{user:{id:l,email:p,username:d}}=function(t){const e=kt().getScopeData();return ke(e,wt().getScopeData()),ke(e,t.getScopeData()),e}(n);sn(u,"user.id",l,!1),sn(u,"user.email",p,!1),sn(u,"user.name",d,!1),sn(u,"sentry.release",i),sn(u,"sentry.environment",o);const{name:h,version:f}=null!=(s=null==(r=e.getSdkMetadata())?void 0:r.sdk)?s:{};sn(u,"sentry.sdk.name",h),sn(u,"sentry.sdk.version",f);const m=e.getIntegrationByName("Replay"),g=null==m?void 0:m.getReplayId(!0);return sn(u,"sentry.replay_id",g),g&&"buffer"===(null==m?void 0:m.getRecordingMode())&&sn(u,"sentry._internal.replay_is_buffering",!0),c(a({},t),{attributes:u})}function cn(t,e){var n,r,s,i;const o=null!=(n=null==e?void 0:e.scope)?n:xt(),a=null!=(r=null==e?void 0:e.captureSerializedMetric)?r:on,c=null!=(s=null==o?void 0:o.getClient())?s:It();if(!c)return void(h&&w.warn("No client available to capture metric."));const{_experiments:u,enableMetrics:l,beforeSendMetric:p}=c.getOptions();if(!(null==(i=null!=l?l:null==u?void 0:u.enableMetrics)||i))return void(h&&w.warn("metrics option not enabled, metric will not be captured."));const d=an(t,c,o);c.emit("processMetric",d);const f=p||(null==u?void 0:u.beforeSendMetric),m=f?f(d):d;if(!m)return void(h&&w.log("`beforeSendMetric` returned `null`, will not send metric."));const g=function(t,e,n){const r={};for(const c in t.attributes)void 0!==t.attributes[c]&&(r[c]=rn(t.attributes[c]));const[,s]=Ve(e,n),i=mt(n),o=i?i.spanContext().traceId:null==s?void 0:s.trace_id,a=i?i.spanContext().spanId:void 0;return{timestamp:ct(),trace_id:null!=o?o:"",span_id:a,name:t.name,type:t.type,unit:t.unit,value:t.value,attributes:r}}(m,c,o);h&&w.log("[Metric]",g),a(c,g),c.emit("afterCaptureMetric",m)}function un(t,e){var n;const r=null!=(n=null!=e?e:ln(t))?n:[];if(0===r.length)return;const s=t.getOptions(),i=function(t,e,n,r){const s={};return(null==e?void 0:e.sdk)&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(s.dsn=Lt(r)),ue(s,[(i=t,[{type:"trace_metric",item_count:i.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:i}])]);var i}(r,s._metadata,s.tunnel,t.getDsn());pn().set(t,[]),t.emit("flushMetrics"),t.sendEnvelope(i)}function ln(t){return pn().get(t)}function pn(){return v("clientToMetricBufferMap",(()=>/* @__PURE__ */new WeakMap))}const dn=Symbol.for("SentryBufferFullError");function hn(t=100){const e=/* @__PURE__ */new Set;function n(t){e.delete(t)}return{get $(){return Array.from(e)},add:function(r){if(!(e.size<t))return be(dn);const s=r();return e.add(s),s.then((()=>n(s)),(()=>n(s))),s},drain:function(t){if(!e.size)return ye(!0);const n=Promise.allSettled(Array.from(e)).then((()=>!0));if(!t)return n;const r=[n,new Promise((e=>setTimeout((()=>e(!1)),t)))];return Promise.race(r)}}}function fn(t,{statusCode:e,headers:n},r=Date.now()){const s=a({},t),i=null==n?void 0:n["x-sentry-rate-limits"],o=null==n?void 0:n["retry-after"];if(i)for(const a of i.trim().split(",")){const[t,e,,,n]=a.split(":",5),i=parseInt(t,10),o=1e3*(isNaN(i)?60:i);if(e)for(const a of e.split(";"))"metric_bucket"===a&&n&&!n.split(";").includes("custom")||(s[a]=r+o);else s.all=r+o}else o?s.all=r+function(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${t}`);return isNaN(r)?6e4:r-e}(o,r):429===e&&(s.all=r+6e4);return s}function mn(t,e,n=hn(t.bufferSize||64)){let r={};return{send:function(s){const i=[];if(pe(s,((e,n)=>{const s=ge(n);!function(t,e,n=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>n}(r,s)?i.push(e):t.recordDroppedEvent("ratelimit_backoff",s)})),0===i.length)return Promise.resolve({});const o=ue(s[0],i),a=e=>{pe(o,((n,r)=>{t.recordDroppedEvent(e,ge(r))}))};return n.add((()=>e({body:he(o)}).then((t=>(void 0!==t.statusCode&&(t.statusCode<200||t.statusCode>=300)&&h&&w.warn(`Sentry responded with status code ${t.statusCode} to sent event.`),r=fn(r,t),t)),(t=>{throw a("network_error"),h&&w.error("Encountered error running transport request:",t),t})))).then((t=>t),(t=>{if(t===dn)return h&&w.error("Skipped sending event because buffer is full."),a("queue_overflow"),Promise.resolve({});throw t}))},flush:t=>n.drain(t)}}function gn(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];(null==n?void 0:n.value)&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch(n){}return e}const _n="Not capturing exception because it's already been captured.",vn="Discarded session because of missing or non-string release",yn=Symbol.for("SentryInternalError"),bn=Symbol.for("SentryDoNotSendEventError");function Sn(t){return{message:t,[yn]:!0}}function En(t){return{message:t,[bn]:!0}}function xn(t){return!!t&&"object"==typeof t&&yn in t}function wn(t){return!!t&&"object"==typeof t&&bn in t}function kn(t,e,n,r,s){let i,o=0,a=!1;t.on(n,(()=>{o=0,clearTimeout(i),a=!1})),t.on(e,(e=>{o+=r(e),o>=8e5?s(t):a||(a=!0,i=setTimeout((()=>{s(t)}),5e3))})),t.on("flush",(()=>{s(t)}))}class Tn{constructor(t){var e,n,r,s,i,o,u;if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=hn(null!=(n=null==(e=t.transportOptions)?void 0:e.bufferSize)?n:64),t.dsn?this._dsn=Ut(t.dsn):h&&w.warn("No DSN provided, client will not send events."),this._dsn){const e=Ge(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport(c(a({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this)},t.transportOptions),{url:e}))}this._options.enableLogs=null!=(s=this._options.enableLogs)?s:null==(r=this._options._experiments)?void 0:r.enableLogs,this._options.enableLogs&&kn(this,"afterCaptureLog","flushLogs",Pn,tn);(null==(u=null!=(o=this._options.enableMetrics)?o:null==(i=this._options._experiments)?void 0:i.enableMetrics)||u)&&kn(this,"afterCaptureMetric","flushMetrics",jn,un)}captureException(t,e,n){const r=Q();if(it(t))return h&&w.log(_n),r;const s=a({event_id:r},e);return this._process((()=>this.eventFromException(t,s).then((t=>this._captureEvent(t,s,n))).then((t=>t))),"error"),s.event_id}captureMessage(t,e,n,r){const s=a({event_id:Q()},n),i=P(t)?t:String(t),o=$(t),c=o?this.eventFromMessage(i,e,s):this.eventFromException(t,s);return this._process((()=>c.then((t=>this._captureEvent(t,s,r)))),o?"unknown":"error"),s.event_id}captureEvent(t,e,n){const r=Q();if((null==e?void 0:e.originalException)&&it(e.originalException))return h&&w.log(_n),r;const s=a({event_id:r},e),i=t.sdkProcessingMetadata||{},o=i.capturedSpanScope,c=i.capturedSpanIsolationScope,u=In(t.type);return this._process((()=>this._captureEvent(t,s,o||n,c)),u),s.event_id}captureSession(t){this.sendSession(t),ut(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){return l(this,null,(function*(){const e=this._transport;if(!e)return!0;this.emit("flush");const n=yield this._isClientDoneProcessing(t),r=yield e.flush(t);return n&&r}))}close(t){return l(this,null,(function*(){const e=yield this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),e}))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some((({name:t})=>t.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const e=this._integrations[t.name];Ke(this,t,this._integrations),e||Je(this,[t])}sendEvent(t,e={}){this.emit("beforeSendEvent",t,e);let n=ve(t,this._dsn,this._options._metadata,this._options.tunnel);for(const r of e.attachments||[])n=le(n,fe(r));this.sendEnvelope(n).then((e=>this.emit("afterSendEvent",t,e)))}sendSession(t){const{release:e,environment:n=ne}=this._options;if("aggregates"in t){const r=t.attrs||{};if(!r.release&&!e)return void(h&&w.warn(vn));r.release=r.release||e,r.environment=r.environment||n,t.attrs=r}else{if(!t.release&&!e)return void(h&&w.warn(vn));t.release=t.release||e,t.environment=t.environment||n}this.emit("beforeSendSession",t);const r=function(t,e,n,r){const s=_e(n);return ue(a(a({sent_at:/* @__PURE__ */(new Date).toISOString()},s&&{sdk:s}),!!r&&e&&{dsn:Lt(e)}),["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()]])}(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(t,e,n=1){if(this._options.sendClientReports){const r=`${t}:${e}`;h&&w.log(`Recording outcome: "${r}"${n>1?` (${n} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(t,e){const n=this._hooks[t]=this._hooks[t]||/* @__PURE__ */new Set,r=(...t)=>e(...t);return n.add(r),()=>{n.delete(r)}}emit(t,...e){const n=this._hooks[t];n&&n.forEach((t=>t(...e)))}sendEnvelope(t){return l(this,null,(function*(){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return yield this._transport.send(t)}catch(e){return h&&w.error("Error while sending envelope:",e),{}}return h&&w.error("Transport disabled"),{}}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=function(t,e){const n={};return e.forEach((e=>{e&&Ke(t,e,n)})),n}(this,t),Je(this,t)}_updateSessionFromEvent(t,e){var n,r;let s="fatal"===e.level,i=!1;const o=null==(n=e.exception)?void 0:n.values;if(o){i=!0,s=!1;for(const t of o)if(!1===(null==(r=t.mechanism)?void 0:r.handled)){s=!0;break}}const u="ok"===t.status;(u&&0===t.errors||u&&s)&&(ut(t,c(a({},s&&{status:"crashed"}),{errors:t.errors||Number(i||s)})),this.captureSession(t))}_isClientDoneProcessing(t){return l(this,null,(function*(){let e=0;for(;!t||e<t;){if(yield new Promise((t=>setTimeout(t,1))),!this._numProcessing)return!0;e++}return!1}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(t,e,n,r){const s=this.getOptions(),i=Object.keys(this._integrations);return!e.integrations&&(null==i?void 0:i.length)&&(e.integrations=i),this.emit("preprocessEvent",t,e),t.type||r.setLastEventId(t.event_id||e.event_id),Pe(s,t,e,n,this,r).then((t=>{if(null===t)return t;this.emit("postprocessEvent",t,e),t.contexts=a({trace:Ot(n)},t.contexts);const r=se(this,n);return t.sdkProcessingMetadata=a({dynamicSamplingContext:r},t.sdkProcessingMetadata),t}))}_captureEvent(t,e={},n=xt(),r=wt()){return h&&On(t)&&w.log(`Captured error event \`${gn(t)[0]||"<unknown>"}\``),this._processEvent(t,e,n,r).then((t=>t.event_id),(t=>{h&&(wn(t)?w.log(t.message):xn(t)?w.warn(t.message):w.warn(t))}))}_processEvent(t,e,n,r){const s=this.getOptions(),{sampleRate:i}=s,o=Cn(t),u=On(t),l=`before send for type \`${t.type||"error"}\``,p=void 0===i?void 0:Bt(i);if(u&&"number"==typeof p&&Math.random()>p)return this.recordDroppedEvent("sample_rate","error"),be(En(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const d=In(t.type);return this._prepareEvent(t,e,n,r).then((t=>{if(null===t)throw this.recordDroppedEvent("event_processor",d),En("An event processor returned `null`, will not send event.");if(e.data&&!0===e.data.__sentry__)return t;const n=function(t,e,n,r){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o,ignoreSpans:u}=e;let l=n;if(On(l)&&s)return s(l,r);if(Cn(l)){if(o||u){const e=function(t){var e,n,r;const{trace_id:s,parent_span_id:i,span_id:o,status:a,origin:c,data:u,op:l}=null!=(n=null==(e=t.contexts)?void 0:e.trace)?n:{};return{data:null!=u?u:{},description:t.transaction,op:l,parent_span_id:i,span_id:null!=o?o:"",start_timestamp:null!=(r=t.start_timestamp)?r:0,status:a,timestamp:t.timestamp,trace_id:null!=s?s:"",origin:c,profile_id:null==u?void 0:u[Ct],exclusive_time:null==u?void 0:u[jt],measurements:t.measurements,is_segment:!0}}(l);if((null==u?void 0:u.length)&&te(e,u))return null;if(o){const t=o(e);t?l=lt(n,{type:"transaction",timestamp:(p=t).timestamp,start_timestamp:p.start_timestamp,transaction:p.description,contexts:{trace:{trace_id:p.trace_id,span_id:p.span_id,parent_span_id:p.parent_span_id,op:p.op,status:p.status,origin:p.origin,data:a(a(a({},p.data),p.profile_id&&{[Ct]:p.profile_id}),p.exclusive_time&&{[jt]:p.exclusive_time})}},measurements:p.measurements}):Xt()}if(l.spans){const e=[],n=l.spans;for(const t of n)if((null==u?void 0:u.length)&&te(t,u))ee(n,t);else if(o){const n=o(t);n?e.push(n):(Xt(),e.push(t))}else e.push(t);const r=l.spans.length-e.length;r&&t.recordDroppedEvent("before_send","span",r),l.spans=e}}if(i){if(l.spans){const t=l.spans.length;l.sdkProcessingMetadata=c(a({},n.sdkProcessingMetadata),{spanCountBeforeProcessing:t})}return i(l,r)}}var p;return l}(this,s,t,e);return function(t,e){const n=`${e} must return \`null\` or a valid event.`;if(R(t))return t.then((t=>{if(!N(t)&&null!==t)throw Sn(n);return t}),(t=>{throw Sn(`${e} rejected with ${t}`)}));if(!N(t)&&null!==t)throw Sn(n);return t}(n,l)})).then((s=>{var i;if(null===s){if(this.recordDroppedEvent("before_send",d),o){const e=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",e)}throw En(`${l} returned \`null\`, will not send event.`)}const p=n.getSession()||r.getSession();if(u&&p&&this._updateSessionFromEvent(p,s),o){const t=((null==(i=s.sdkProcessingMetadata)?void 0:i.spanCountBeforeProcessing)||0)-(s.spans?s.spans.length:0);t>0&&this.recordDroppedEvent("before_send","span",t)}const h=s.transaction_info;if(o&&h&&s.transaction!==t.transaction){const t="custom";s.transaction_info=c(a({},h),{source:t})}return this.sendEvent(s,e),s})).then(null,(t=>{if(wn(t)||xn(t))throw t;throw this.captureException(t,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:t}),Sn(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}_process(t,e){this._numProcessing++,this._promiseBuffer.add(t).then((t=>(this._numProcessing--,t)),(t=>(this._numProcessing--,t===dn&&this.recordDroppedEvent("queue_overflow",e),t)))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map((([t,e])=>{const[n,r]=t.split(":");return{reason:n,category:r,quantity:e}}))}_flushOutcomes(){h&&w.log("Flushing outcomes...");const t=this._clearOutcomes();if(0===t.length)return void(h&&w.log("No outcomes to send"));if(!this._dsn)return void(h&&w.log("No dsn provided, will not send outcomes"));h&&w.log("Sending outcomes:",t);const e=(n=t,ue((r=this._options.tunnel&&Lt(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:ot(),discarded_events:n}]]));var n,r;this.sendEnvelope(e)}}function In(t){return"replay_event"===t?"replay":t||"error"}function On(t){return void 0===t.type}function Cn(t){return"transaction"===t.type}function jn(t){let e=0;return t.name&&(e+=2*t.name.length),e+=8,e+$n(t.attributes)}function Pn(t){let e=0;return t.message&&(e+=2*t.message.length),e+$n(t.attributes)}function $n(t){if(!t)return 0;let e=0;return Object.values(t).forEach((t=>{Array.isArray(t)?e+=t.length*Nn(t[0]):$(t)?e+=Nn(t):e+=100})),e}function Nn(t){return"string"==typeof t?2*t.length:"number"==typeof t?8:"boolean"==typeof t?4:0}function Mn(t,e){!0===e.debug&&(h?w.enable():b((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})));xt().update(e.initialScope);const n=new t(e);return function(t){xt().setClient(t)}(n),n.init(),n}const Rn=function(t,...e){const n=new String(String.raw(t,...e));return n.__sentry_template_string__=t.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=e,n};const Dn=100;function An(t,e){const n=It(),r=wt();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=Dn}=n.getOptions();if(i<=0)return;const o=ot(),c=a({timestamp:o},t),u=s?b((()=>s(c,e))):c;null!==u&&(n.emit&&n.emit("beforeAddBreadcrumb",u,e),r.addBreadcrumb(u,i))}let Ln;const Fn=/* @__PURE__ */new WeakMap,Hn=()=>({name:"FunctionToString",setupOnce(){Ln=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=B(this),n=Fn.has(It())&&void 0!==e?e:this;return Ln.apply(n,t)}}catch(t){}},setup(t){Fn.set(t,!0)}}),Un=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Bn=(t={})=>{let e;return{name:"EventFilters",setup(n){const r=n.getOptions();e=qn(t,r)},processEvent(n,r,s){if(!e){const n=s.getOptions();e=qn(t,n)}return function(t,e){if(t.type){if("transaction"===t.type&&function(t,e){if(!(null==e?void 0:e.length))return!1;const n=t.transaction;return!!n&&X(n,e)}(t,e.ignoreTransactions))return h&&w.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${nt(t)}`),!0}else{if(function(t,e){if(!(null==e?void 0:e.length))return!1;return gn(t).some((t=>X(t,e)))}(t,e.ignoreErrors))return h&&w.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${nt(t)}`),!0;if(function(t){var e,n;if(!(null==(n=null==(e=t.exception)?void 0:e.values)?void 0:n.length))return!1;return!t.message&&!t.exception.values.some((t=>t.stacktrace||t.type&&"Error"!==t.type||t.value))}(t))return h&&w.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${nt(t)}`),!0;if(function(t,e){if(!(null==e?void 0:e.length))return!1;const n=Gn(t);return!!n&&X(n,e)}(t,e.denyUrls))return h&&w.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${nt(t)}.\nUrl: ${Gn(t)}`),!0;if(!function(t,e){if(!(null==e?void 0:e.length))return!0;const n=Gn(t);return!n||X(n,e)}(t,e.allowUrls))return h&&w.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${nt(t)}.\nUrl: ${Gn(t)}`),!0}return!1}(n,e)?null:n}}},Wn=(t={})=>c(a({},Bn(t)),{name:"InboundFilters"});function qn(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:Un],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function Gn(t){var e,n,r;try{const s=[...null!=(n=null==(e=t.exception)?void 0:e.values)?n:[]].reverse().find((t=>{var e,n,r;return void 0===(null==(e=t.mechanism)?void 0:e.parent_id)&&(null==(r=null==(n=t.stacktrace)?void 0:n.frames)?void 0:r.length)})),i=null==(r=null==s?void 0:s.stacktrace)?void 0:r.frames;return i?function(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(i):null}catch(s){return h&&w.error(`Cannot extract url for event ${nt(t)}`),null}}function zn(t,e,n,r,s){Qe({level:t,message:e,attributes:n,severityNumber:s},r)}const Jn=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,debug:function(t,e,{scope:n}={}){zn("debug",t,e,n)},error:function(t,e,{scope:n}={}){zn("error",t,e,n)},fatal:function(t,e,{scope:n}={}){zn("fatal",t,e,n)},fmt:Rn,info:function(t,e,{scope:n}={}){zn("info",t,e,n)},trace:function(t,e,{scope:n}={}){zn("trace",t,e,n)},warn:function(t,e,{scope:n}={}){zn("warn",t,e,n)}},Symbol.toStringTag,{value:"Module"}));function Kn(t,e,n,r){cn({type:t,name:e,value:n,unit:null==r?void 0:r.unit,attributes:null==r?void 0:r.attributes},{scope:null==r?void 0:r.scope})}const Vn=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,count:function(t,e=1,n){Kn("counter",t,e,n)},distribution:function(t,e,n){Kn("distribution",t,e,n)},gauge:function(t,e,n){Kn("gauge",t,e,n)}},Symbol.toStringTag,{value:"Module"}));function Yn(t){t(xt())}const Xn="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Zn="finishReason",Qn=["heartbeatFailed","idleTimeout","documentHidden"];let tr;function er(t){tr=t}function nr(t){return t/1e3}class rr{constructor(t=1e3){this.spans=[],this._maxlen=t}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class sr{constructor(t){var e,n,r,s,i,o,c,u,l,p,d,h,f;if(this.name="",this.traceId=Q(),this.spanId=Q().substring(16),this.startTimestamp=ot(),this.tags={},this.data={},this.attributes={},this.instrumenter="sentry",!t)return this;this.traceId=null!=(e=t.traceId)?e:this.traceId,this.spanId=null!=(n=t.spanId)?n:this.spanId,this.parentSpanId=null!=(r=t.parentSpanId)?r:this.parentSpanId,"sampled"in t&&(this.sampled=t.sampled),this.op=null!=(s=t.op)?s:this.op,this.description=null!=(o=null!=(i=t.description)?i:t.name)?o:this.description,this.name=null!=(u=null!=(c=t.name)?c:t.description)?u:this.name,this.data=t.data?a({},t.data):this.data,this.tags=t.tags?a({},t.tags):this.tags,this.attributes=t.attributes?a({},t.attributes):this.attributes,this.status=null!=(l=t.status)?l:this.status,this.startTimestamp=null!=(p=t.startTimestamp)?p:this.startTimestamp,this.endTimestamp=null!=(d=t.endTimestamp)?d:this.endTimestamp,this.instrumenter=null!=(h=t.instrumenter)?h:this.instrumenter,this.origin=null!=(f=t.origin)?f:this.origin}child(t){return this.startChild(t)}startChild(t){var e;const n=new sr(c(a({},t),{parentSpanId:this.spanId,sampled:this.sampled,attributes:null!=(e=null==t?void 0:t.attributes)?e:{},instrumenter:this.instrumenter,traceId:this.traceId}));return n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,n}setTag(t,e){return this.tags=c(a({},this.tags),{[t]:e}),this}setData(t,e){return this.data=c(a({},this.data),{[t]:e}),this}setAttribute(t,e){return void 0===e?delete this.attributes[t]:this.attributes[t]=e,this}setAttributes(t){return Object.keys(t).forEach((e=>this.setAttribute(e,t[e]))),this}setStatus(t){var e;return this.status="string"==typeof t?t:null!=(e=t.message)?e:t.code,this}setHttpStatus(t){this.setTag("http.status_code",String(t));const e=function(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(t);return"unknown_error"!==e&&this.setStatus(e),this}addEvent(t,e,n){return this}addLink(t){return this}addLinks(t){return this}recordException(t){}isSuccess(){return"ok"===this.status}setName(t){this.name=t,this.description=t}updateName(t){return this.setName(t),this}end(t){this.finish(function(t){if(void 0===t)return ot();if(Array.isArray(t)&&2===t.length){const[e,n]=t;return e+n/1e9}if(t instanceof Date)return t.getTime()/1e3;if("number"==typeof t)return t>1e12?nr(t):t;return ot()}(t))}finish(t){this.endTimestamp="number"==typeof t?t:ot()}toTraceparent(){let t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${t}`}toContext(){return J({data:this.data,description:this.description,attributes:this.attributes,name:this.name,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:"number"==typeof this.status?String(this.status):this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){var e,n,r,s,i,o,a,c,u;return this.data=null!=(e=t.data)?e:{},this.description=null!=(n=t.description)?n:t.name,this.name=null!=(s=null!=(r=t.name)?r:t.description)?s:this.name,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=null!=(i=t.spanId)?i:this.spanId,this.startTimestamp=null!=(o=t.startTimestamp)?o:this.startTimestamp,this.status=t.status,this.tags=null!=(a=t.tags)?a:{},this.attributes=null!=(c=t.attributes)?c:this.attributes,this.traceId=null!=(u=t.traceId)?u:this.traceId,this}getTraceContext(){return J({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:"number"==typeof this.status?String(this.status):this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return J({data:Object.keys(this.data).length>0?this.data:{},description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:"number"==typeof this.status?String(this.status):this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}spanContext(){return{traceId:this.traceId,spanId:this.spanId,traceFlags:this.sampled?1:0}}isRecording(){return!1!==this.sampled&&void 0===this.endTimestamp}}class ir extends sr{constructor(t){super(t),this._measurements={},this._contexts={},this.name=t.name||"",this.metadata=a({source:"custom",spanMetadata:{}},t.metadata),this._trimEnd=t.trimEnd,this.transaction=this}setName(t){this.name=t}setContext(t,e){this._contexts[t]=e}setMeasurement(t,e,n=""){this._measurements[t]={value:e,unit:n}}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new rr(t)),this.spanRecorder.add(this)}setMeasurements(t){this._measurements=a({},t)}setMetadata(t){this.metadata=a(a({},this.metadata),t)}getDynamicSamplingContext(){var t;return(null==(t=this.metadata)?void 0:t.dynamicSamplingContext)||{}}getProfileId(){}finish(t){if(void 0!==this.endTimestamp)return;if(this.name||(Xn&&w.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(t),!0!==this.sampled)return void(Xn&&w.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."));const e=this.spanRecorder?this.spanRecorder.spans.filter((t=>t!==this&&t.endTimestamp)):[],n=e.map((t=>t.toJSON()));this._trimEnd&&e.length>0&&(this.endTimestamp=e.reduce(((t,e)=>t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t)).endTimestamp);const r={contexts:a({trace:this.getTraceContext()},this._contexts),spans:n,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:this.metadata};return Object.keys(this._measurements).length>0&&(Xn&&w.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),r.measurements=this._measurements),Xn&&w.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),De(r)}toContext(){const t=super.toContext();return J(c(a({},t),{name:this.name,trimEnd:this._trimEnd}))}updateWithContext(t){var e;return super.updateWithContext(t),this.name=null!=(e=t.name)?e:"",this._trimEnd=t.trimEnd,this}}class or extends rr{constructor(t,e,n="",r){super(r),this._pushActivity=t,this._popActivity=e,this.transactionSpanId=n}add(t){t.spanId!==this.transactionSpanId&&(t.finish=e=>{t.endTimestamp="number"==typeof e?e:ot(),this._popActivity(t.spanId)},void 0===t.endTimestamp&&this._pushActivity(t.spanId)),super.add(t)}}class ar extends ir{constructor(t,e=1e3,n=!1){super(t),this._idleTimeout=e,this._onScope=n,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._beforeFinishCallbacks=[],n&&(Xn&&w.log(`Setting idle transaction as active. Span ID: ${this.spanId}`),er(this)),this._initTimeout=setTimeout((()=>{this._finished||this.finish()}),this._idleTimeout)}finish(t=ot()){if(this._finished=!0,this.activities={},this.spanRecorder){Xn&&w.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanId===this.spanId)return!0;e.endTimestamp||(e.endTimestamp=t,e.setStatus("cancelled"),Xn&&w.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const n=e.startTimestamp<t;return n||Xn&&w.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(e,void 0,2)),n})),Xn&&w.log("[Tracing] flushing IdleTransaction")}else Xn&&w.log("[Tracing] No active IdleTransaction");return this._onScope&&er(void 0),super.finish(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const e=t=>{this._finished||this._pushActivity(t)},n=t=>{this._finished||this._popActivity(t)};this.spanRecorder=new or(e,n,this.spanId,t),Xn&&w.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}_pushActivity(t){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),Xn&&w.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,Xn&&w.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(Xn&&w.log(`[Tracing] popActivity ${t}`),delete this.activities[t],Xn&&w.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const t=this._idleTimeout,e=ot()+t/1e3;setTimeout((()=>{this._finished||(this.setTag(Zn,Qn[1]),this.finish(e))}),t)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?(Xn&&w.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this.setTag(Zn,Qn[0]),this.finish()):this._pingHeartbeat()}_pingHeartbeat(){Xn&&w.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout((()=>{this._beat()}),5e3)}}function cr(t,e,n){const[r,s]=function(t,e,n){if(!Zt(t))return[!1];let r,s;"function"==typeof t.tracesSampler?(s=t.tracesSampler(c(a({},e),{inheritOrSampleWith:t=>"number"==typeof e.parentSampleRate?e.parentSampleRate:"boolean"==typeof e.parentSampled?Number(e.parentSampled):t})),r=!0):void 0!==e.parentSampled?s=e.parentSampled:void 0!==t.tracesSampleRate&&(s=t.tracesSampleRate,r=!0);const i=Bt(s);if(void 0===i)return h&&w.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return h&&w.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,i,r];const o=n<i;return o||h&&w.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,i,r]}({tracesSampleRate:e.tracesSampleRate,tracesSampler:e.tracesSampler},n,Math.random());return t.sampled=r,t.sampled?(Xn&&w.log(`[Tracing] starting ${t.op} transaction - ${t.name}`),t):(Xn&&w.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(null!=s?s:0)})`),t)}function ur(t,e){const n=It(),r=n&&n.getOptions&&n.getOptions()||{},s=t.name||t.op||"unknown-transaction",i=a({parentSampled:t.parentSampled,transactionContext:c(a({},t),{name:s}),name:s},e);let o=new ir(c(a({},t),{name:s}));if(o=cr(o,r,i),o.sampled){const t=r._experiments&&r._experiments.maxSpans;o.initSpanRecorder(t),er(o)}return o}const lr="sentry.javascript.miniapp",pr="10.27.0-rc.1",dr="?",hr=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,fr=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,mr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,gr=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,_r=/\((\S*)(?::(\d+))(?::(\d+))\)/,vr=/^\s*at (.*?) ?\((\S*):(\d+):(\d+)\)/i;function yr(t){let e=null;const n=t&&t.framesToPop;try{if(e=function(t){if(!t||!t.stacktrace)return null;const e=t.stacktrace,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,s=e.split("\n"),i=[];let o;for(let a=0;a<s.length;a+=2){let t=null;(o=n.exec(s[a]))?t={url:o[2],func:o[3],args:[],line:+o[1],column:null}:(o=r.exec(s[a]))&&(t={url:o[6],func:o[3]||o[4],args:o[5]?o[5].split(","):[],line:+o[1],column:+o[2]}),t&&(!t.func&&t.line&&(t.func=dr),i.push(t))}if(!i.length)return null;return{message:Sr(t),name:t.name,stack:i}}(t),e)return br(e,n)}catch(r){}try{if(e=function(t){if(!t||!t.stack)return null;const e=[],n=t.stack.split("\n");let r,s,i,o;for(let a=0;a<n.length;++a){if(i=hr.exec(n[a])){const t=i[2]&&0===i[2].indexOf("native");r=i[2]&&0===i[2].indexOf("eval"),r&&(s=_r.exec(i[2]))&&(i[2]=s[1],i[3]=s[2],i[4]=s[3]),o={url:i[2],func:i[1]||dr,args:t?[i[2]]:[],line:i[3]?+i[3]:null,column:i[4]?+i[4]:null}}else if(i=mr.exec(n[a]))o={url:i[2],func:i[1]||dr,args:[],line:+i[3],column:i[4]?+i[4]:null};else if(i=fr.exec(n[a]))r=i[3]&&i[3].indexOf(" > eval")>-1,r&&(s=gr.exec(i[3]))?(i[1]=i[1]||"eval",i[3]=s[1],i[4]=s[2],i[5]=""):0!==a||i[5]||void 0===t.columnNumber||(e[0].column=t.columnNumber+1),o={url:i[3],func:i[1]||dr,args:i[2]?i[2].split(","):[],line:i[4]?+i[4]:null,column:i[5]?+i[5]:null};else{if(!(i=vr.exec(n[a])))continue;o={url:i[2],func:i[1]||dr,args:[],line:i[3]?+i[3]:null,column:i[4]?+i[4]:null}}!o.func&&o.line&&(o.func=dr),e.push(o)}if(!e.length)return null;return{message:Sr(t),name:t.name,stack:e}}(t),e)return br(e,n)}catch(r){}return{message:Sr(t),name:t&&t.name,stack:[],failed:!0}}function br(t,e){try{return c(a({},t),{stack:t.stack.slice(e)})}catch(n){return t}}function Sr(t){const e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function Er(t){const e=wr(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function xr(t){return{exception:{values:[Er(t)]}}}function wr(t){if(!t||!t.length)return[];let e=t;const n=e[0].func||"",r=e[e.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.map((t=>({colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}))).slice(0,100).reverse()}function kr(t,e,n={}){let r;if(O(t,"ErrorEvent")&&t.error){return r=xr(yr(t=t.error)),r}if(C(t)||function(t){return O(t,"DOMException")}(t)){const s=t,i=s.name||(C(s)?"DOMError":"DOMException"),o=s.message?`${i}: ${s.message}`:i;return r=Tr(o,e,n),rt(r,o),r}if(I(t))return r=xr(yr(t)),r;if(N(t)||M(t)){return r=function(t,e,n){const r={exception:{values:[{type:M(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:`Non-Error ${n?"promise rejection":"exception"} captured with keys: ${z(t)}`}]},extra:{__serialized__:ae(t)}};if(e){const t=wr(yr(e).stack);r.stacktrace={frames:t}}return r}(t,e,n.rejection),st(r,{synthetic:!0}),r}return r=Tr(t,e,n),rt(r,`${t}`),st(r,{synthetic:!0}),r}function Tr(t,e,n={}){const r={message:t};if(n.attachStacktrace&&e){const t=wr(yr(e).stack);r.stacktrace={frames:t}}return r}const Ir=(()=>{let t={request:()=>{},httpRequest:()=>{},getSystemInfoSync:()=>{},getPerformance:()=>({}),onAppHide:function(t){},canIUse:function(t){return!1}};if("object"==typeof wx)t=wx;else if("object"==typeof my)t=my;else if("object"==typeof tt)t=tt;else if("object"==typeof dd)t=dd;else if("object"==typeof qq)t=qq;else{if("object"!=typeof swan)throw new Error("sentry-miniapp ");t=swan}return t})(),Or=(()=>{let t="unknown";return"object"==typeof wx?t="wechat":"object"==typeof my?t="alipay":"object"==typeof tt?t="bytedance":"object"==typeof dd?t="dingtalk":"object"==typeof qq?t="qq":"object"==typeof swan&&(t="swan"),t})();function Cr(t){return mn(t,(function(e){return new Se(((n,r)=>{const s=Ir.request||Ir.httpRequest;"function"==typeof s?s({url:t.url,method:"POST",data:e.body,header:{"content-type":"application/json"},success(t){var e,r,s,i;n({statusCode:null==t?void 0:t.statusCode,headers:{"x-sentry-rate-limits":null!=(r=null==(e=null==t?void 0:t.headers)?void 0:e["X-Sentry-Rate-Limits"])?r:null,"retry-after":null!=(i=null==(s=null==t?void 0:t.headers)?void 0:s["Retry-After"])?i:null}})},fail(t){r(t)}}):r(new Error("Miniapp request function is not available"))}))}))}const jr=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,makeMiniappTransport:Cr},Symbol.toStringTag,{value:"Module"})),Pr=()=>[];class $r extends Tn{constructor(t={}){const e=t.transport||Cr,n=t.stackParser||Pr,r=t.integrations||t.defaultIntegrations||[],s=c(a({},t),{transport:e,stackParser:n,integrations:r,dsn:t.dsn,tracesSampleRate:t.tracesSampleRate});!function(t,e,n=[e],r="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:n.map((t=>({name:`${r}:@sentry/${t}`,version:m}))),version:m}),t._metadata=s}(s,"miniapp",["miniapp"]),super(s)}_prepareEvent(t,e,n,r){return t.platform=t.platform||"javascript",t.sdk=c(a({},t.sdk),{name:lr,packages:[...t.sdk&&t.sdk.packages||[],{name:"npm:@sentry/miniapp",version:pr}],version:pr}),super._prepareEvent(t,e,n,r)}showReportDialog(t={}){console.log("sentry-miniapp ",t)}eventFromException(t,e){const n=kr(t,e&&e.syntheticException?e.syntheticException:void 0,{attachStacktrace:this._options.attachStacktrace});return e&&e.event_id&&(n.event_id=e.event_id),Promise.resolve(n)}eventFromMessage(t,e="info",n){const r=n&&n.syntheticException?n.syntheticException:void 0,s=Tr(String(t),r,{attachStacktrace:this._options.attachStacktrace});return s.level=e,n&&n.event_id&&(s.event_id=n.event_id),Promise.resolve(s)}}function Nr(t,e={},n){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return e;if(B(t))return t}catch(s){return t}const r=function(...n){try{const r=n.map((t=>Nr(t,e)));return t.handleEvent?t.handleEvent.apply(this,r):t.apply(this,r)}catch(r){throw setTimeout((()=>{})),Tt((t=>{t.addEventProcessor((t=>{const r=a({},t);return e.mechanism&&(rt(r,void 0),st(r,e.mechanism)),r.extra=c(a({},r.extra),{arguments:oe(n,3)}),r})),Me(r)})),r}};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}catch(s){}U(r,t),H(t,"__sentry_wrapped__",r);try{const e=Object.getOwnPropertyDescriptor(r,"name");(null==e?void 0:e.configurable)&&Object.defineProperty(r,"name",{get:()=>t.name})}catch(s){}return r}const Mr=class t{constructor(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._onPageNotFoundHandlerInstalled=!1,this._onMemoryWarningHandlerInstalled=!1,this._options=a({onerror:!0,onunhandledrejection:!0,onpagenotfound:!0,onmemorywarning:!0},e)}setupOnce(){Error.stackTraceLimit=50,this._options.onerror&&(w.log("Global Handler attached: onError"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(w.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler()),this._options.onpagenotfound&&(w.log("Global Handler attached: onPageNotFound"),this._installGlobalOnPageNotFoundHandler()),this._options.onmemorywarning&&(w.log("Global Handler attached: onMemoryWarning"),this._installGlobalOnMemoryWarningHandler())}_installGlobalOnErrorHandler(){this._onErrorHandlerInstalled||(Ir.onError&&Ir.onError((t=>{Me("string"==typeof t?new Error(t):t)})),this._onErrorHandlerInstalled=!0)}_installGlobalOnUnhandledRejectionHandler(){this._onUnhandledRejectionHandlerInstalled||(Ir.onUnhandledRejection&&Ir.onUnhandledRejection((({reason:t,promise:e})=>{Me("string"==typeof t?new Error(t):t,{data:e})})),this._onUnhandledRejectionHandlerInstalled=!0)}_installGlobalOnPageNotFoundHandler(){this._onPageNotFoundHandlerInstalled||(Ir.onPageNotFound&&Ir.onPageNotFound((t=>{const e=t.path.split("?")[0];Ue("pagenotfound",e),Fe("message",JSON.stringify(t)),Re(`: ${e}`)})),this._onPageNotFoundHandlerInstalled=!0)}_installGlobalOnMemoryWarningHandler(){this._onMemoryWarningHandlerInstalled||(Ir.onMemoryWarning&&Ir.onMemoryWarning((({level:t=-1})=>{let e="";switch(t){case 5:e="TRIM_MEMORY_RUNNING_MODERATE";break;case 10:e="TRIM_MEMORY_RUNNING_LOW";break;case 15:e="TRIM_MEMORY_RUNNING_CRITICAL";break;default:return}Ue("memory-warning",String(t)),Fe("message",e),Re("")})),this._onMemoryWarningHandlerInstalled=!0)}};Mr.id="GlobalHandlers";let Rr=Mr;const Dr=class t{constructor(){this._ignoreOnError=0,this.name=t.id}_wrapTimeFunction(t){return function(...e){const n=e[0];return e[0]=Nr(n,{mechanism:{data:{function:Lr(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}_wrapRAF(t){return function(e){return t(Nr(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Lr(t)},handled:!0,type:"instrument"}}))}}_wrapEventTarget(t){const e=f,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(F(n,"addEventListener",(function(e){return function(n,r,s){try{"function"==typeof r.handleEvent&&(r.handleEvent=Nr(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:Lr(r),target:t},handled:!0,type:"instrument"}}))}catch(i){}return e.call(this,n,Nr(r,{mechanism:{data:{function:"addEventListener",handler:Lr(r),target:t},handled:!0,type:"instrument"}}),s)}})),F(n,"removeEventListener",(function(t){return function(e,n,r){let s=n;try{s=s&&(s.__sentry_wrapped__||s)}catch(i){}return t.call(this,e,s,r)}})))}setupOnce(){this._ignoreOnError=this._ignoreOnError;const t=f;F(t,"setTimeout",this._wrapTimeFunction.bind(this)),F(t,"setInterval",this._wrapTimeFunction.bind(this)),F(t,"requestAnimationFrame",this._wrapRAF.bind(this)),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"].forEach(this._wrapEventTarget.bind(this))}};Dr.id="TryCatch";let Ar=Dr;function Lr(t){try{return t&&t.name||"<anonymous>"}catch(e){return"<anonymous>"}}const Fr=class t{constructor(e={}){this.name=t.id,this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(){qe(((e,n)=>{const r=It(),s=r&&r.getIntegrationByName(t.id);return s?s._handler(e,n):e}))}_handler(t,e){if(!(t.exception&&t.exception.values&&e&&e.originalException instanceof Error))return t;const n=this._walkErrorTree(e.originalException,this._key);return t.exception.values=[...n,...t.exception.values],t}_walkErrorTree(t,e,n=[]){if(!(t[e]instanceof Error)||n.length+1>=this._limit)return n;const r=Er(yr(t[e]));return this._walkErrorTree(t[e],e,[r,...n])}};Fr.id="LinkedErrors";let Hr=Fr;const Ur=class t{constructor(){this.name=t.id}setupOnce(){qe((e=>{const n=It();if(n&&n.getIntegrationByName(t.id))try{const t=Ir.getSystemInfoSync(),{SDKVersion:n="0.0.0",batteryLevel:r,currentBattery:s,battery:i,brand:o,language:u,model:l,pixelRatio:p,platform:d,screenHeight:h,screenWidth:f,system:m,version:g,app:_,appName:v}=t,[y,b]=m.split(" "),S=c(a({},e.tags),{SDKVersion:n}),E=_||v||Or||"app";return c(a({},e),{tags:S,contexts:c(a({},e.contexts),{device:{brand:o,battery_level:r||s||i,model:l,language:u,platform:d,screen_dpi:p,screen_height:h,screen_width:f},os:{name:y||m,version:b||m},browser:{name:E,version:g}})})}catch(r){console.warn(`sentry-miniapp get system info fail: ${r}`)}return e}))}};Ur.id="System";let Br=Ur;const Wr=class t{constructor(e){this.name=t.id,this._options=a({enable:!0},e)}setupOnce(){qe((e=>{const n=It();if(n&&n.getIntegrationByName(t.id)&&this._options.enable)try{const t=getCurrentPages().map((t=>({route:t.route,options:t.options})));return c(a({},e),{extra:c(a({},e.extra),{routers:t})})}catch(r){console.warn(`sentry-miniapp get router info fail: ${r}`)}return e}))}};Wr.id="Router";let qr=Wr;const Gr=class t{constructor(){this.name=t.id}setupOnce(){qe((e=>{const n=It();if(n&&n.getIntegrationByName(t.id)&&"wechat"===Or&&Ir.getLaunchOptionsSync){if(1129===Ir.getLaunchOptionsSync().scene)return null}return e}))}};Gr.id="IgnoreMpcrawlerErrors";let zr=Gr;const Jr=/* @__PURE__ */Object.freeze(/* @__PURE__ */Object.defineProperty({__proto__:null,GlobalHandlers:Rr,IgnoreMpcrawlerErrors:zr,LinkedErrors:Hr,Router:qr,System:Br,TryCatch:Ar},Symbol.toStringTag,{value:"Module"}));class Kr{constructor(t=!1){this._reportAllChanges=t,this._measurements={}}addPerformanceEntries(t){var e;const n=this._getPerformance();n&&(this._timeOrigin=this._getTimeOrigin(n,t),this._observer=null==(e=n.createObserver)?void 0:e.call(n,(e=>{var n;((null==(n=null==e?void 0:e.getEntries)?void 0:n.call(e))||[]).forEach((e=>this._handleEntry(t,e)))})),this._observer&&this._observer.observe({entryTypes:["navigation","render","script","loadPackage","resource"]}))}_getPerformance(){if(!Ir.getPerformance)return;const t=Ir.getPerformance();return t&&"function"==typeof t.createObserver?t:void 0}_getTimeOrigin(t,e){if("number"==typeof t.timeOrigin)return nr(t.timeOrigin);const n="function"==typeof t.now?t.now():void 0;return"number"==typeof n?nr(Date.now()-n):e.startTimestamp}_handleEntry(t,e){if(void 0!==t.endTimestamp)return void this._stopObserver();const n=this._toTimestamp(e.startTime,t.startTimestamp),r=this._toTimestamp(e.startTime+e.duration,t.startTimestamp);!function(t,e){var n=e,{startTimestamp:r}=n,s=u(n,["startTimestamp"]);r&&t.startTimestamp>r&&(t.startTimestamp=r);t.startChild(a({startTimestamp:r},s))}(t,{op:this._mapOp(e),description:this._getDescription(e),startTimestamp:n,endTimestamp:r,data:this._buildSpanData(e)}),this._recordMeasurements(e,t,n),t.setTag("sentry_reportAllChanges",this._reportAllChanges),Object.keys(this._measurements).length>0&&t.setMeasurements(this._measurements)}_mapOp(t){switch(t.entryType){case"navigation":return"navigation";case"render":return"ui.render";case"script":return"script";case"loadPackage":return"resource.package";case"resource":return"resource";default:return t.entryType||"custom"}}_getDescription(t){return t.path||t.moduleName||t.name}_buildSpanData(t){const e={entryType:t.entryType};return t.moduleName&&(e.moduleName=t.moduleName),t.path&&(e.path=t.path),"number"==typeof t.duration&&(e.duration=t.duration),e}_recordMeasurements(t,e,n){const r=(t.name||"").toLowerCase(),s=t.duration,i=Math.max(1e3*(n-e.startTimestamp),0);if("first-paint"===r||"firstpaint"===r?this._measurements.fp={value:i,unit:"millisecond"}:"first-contentful-paint"===r||"firstcontentfulpaint"===r?this._measurements.fcp={value:i,unit:"millisecond"}:"largest-contentful-paint"===r||"largestcontentfulpaint"===r||"lcp"===r?this._measurements.lcp={value:i,unit:"millisecond"}:"first-input-delay"!==r&&"firstinputdelay"!==r&&"fid"!==r||"number"!=typeof s?"navigation"!==t.entryType||"number"!=typeof s||this._measurements.navigation||(this._measurements.navigation={value:s,unit:"millisecond"}):this._measurements.fid={value:s,unit:"millisecond"},this._reportAllChanges&&"number"==typeof s){const e=this._measurementKey(t);e&&!this._measurements[e]&&(this._measurements[e]={value:s,unit:"millisecond"})}}_measurementKey(t){const e=t.name||t.entryType;if(e)return e.replace(/\s+/g,"_").toLowerCase()}_toTimestamp(t,e){var n;if(t>1e12)return nr(t);return(null!=(n=this._timeOrigin)?n:e)+nr(t)}_stopObserver(t){var e;null==(e=this._observer)||e.disconnect(),this._observer=void 0,t&&!t.endTimestamp&&t.finish()}}const Vr=a({idleTimeout:5e3,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,maxTransactionDuration:600,routingInstrumentation:function(t,e=!0,n=!0){const r=f,s=Ir.onAppRoute||r.wx&&r.wx.onAppRoute;if("function"!=typeof s)return;let i,o=!1;const a=(r,s=!1)=>{const o=(null==r?void 0:r.path)||(null==r?void 0:r.route)||(null==r?void 0:r.url)||"",a="string"==typeof o&&o.length>0?o:"unknown-route";((r,s)=>{(s&&e||!s&&n)&&(i&&"function"==typeof i.finish&&i.finish(),i=t(r))})({name:a,op:"navigation",description:(null==r?void 0:r.openType)||(null==r?void 0:r.event)||void 0,metadata:{requestPath:a}},s)};if(e&&"function"==typeof r.getCurrentPages){const t=r.getCurrentPages()||[],e=t[t.length-1];e&&e.route&&(o=!0,a({path:e.route},!0))}s((t=>{const e=!o;o=!0,a(t,e)}))}},{traceRequest:!0}),Yr=class t{constructor(e){this.name=t.id,this._configuredIdleTimeout=null==e?void 0:e.idleTimeout,this.options=a(a({},Vr),e);const{_metricOptions:n}=this.options;this._metrics=new Kr(n&&n._reportAllChanges)}setupOnce(){var t;const{routingInstrumentation:e,startTransactionOnLocationChange:n,startTransactionOnPageLoad:r}=this.options;e((t=>this._createRouteTransaction(t)),r,n),null==(t=Ir.onAppHide)||t.call(Ir,(()=>{null==tr||tr.finish()}))}_createRouteTransaction(t){var e;const{beforeNavigate:n,idleTimeout:r,maxTransactionDuration:s}=this.options,i=c(a({},t),{trimEnd:!0}),o="function"==typeof n?n(i):i;if(void 0===o)return;const u=function(t,e,n,r){const s=It(),i=s&&s.getOptions&&s.getOptions()||{},o=t.name||t.op||"unknown-transaction",u=a({parentSampled:t.parentSampled,transactionContext:c(a({},t),{name:o}),name:o},r);let l=new ar(c(a({},t),{name:o}),e,n);if(l=cr(l,i,u),l.sampled){const t=i._experiments&&i._experiments.maxSpans;l.initSpanRecorder(t),er(l)}return l}(o,r,!0,{});return u.registerBeforeFinishCallback(((t,e)=>{var n;!function(t,e,n){const r=n-e.startTimestamp,s=n&&(r>t||r<0);s&&(e.setStatus("deadline_exceeded"),e.setTag("maxTransactionDurationExceeded","true"))}((n=s,1e3*n),t,e)})),u.setTag("idleTimeout",null!=(e=this._configuredIdleTimeout)?e:r),this._metrics.addPerformanceEntries(u),u}};Yr.id="MiniAppTracing";let Xr=Yr;const Zr=[Wn(),Hn(),new Ar,new Rr,new Hr,new Br,new qr,new zr,new Xr];function Qr(t={}){void 0===t.defaultIntegrations&&(t.defaultIntegrations=Zr),t.normalizeDepth=t.normalizeDepth||5;const e=a({integrations:t.integrations||t.defaultIntegrations||[],stackParser:t.stackParser||(()=>[]),transport:t.transport||Cr},t);Mn($r,e)}function ts(t={}){t.eventId||(t.eventId=We());const e=It();e&&e.showReportDialog(t)}function es(){return We()}function ns(t){const e=It();return e?e.flush(t):ye(!1)}function rs(t){const e=It();return e?e.close(t):ye(!1)}function ss(t){return Nr(t)()}export{Jr as Integrations,$r as MiniappClient,lr as SDK_NAME,pr as SDK_VERSION,jr as Transports,An as addBreadcrumb,qe as addEventProcessor,De as captureEvent,Me as captureException,Re as captureMessage,rs as close,Yn as configureScope,Zr as defaultIntegrations,ns as flush,xt as getCurrentScope,Qr as init,es as lastEventId,Jn as logger,Vn as metrics,Ae as setContext,Fe as setExtra,Le as setExtras,Ue as setTag,He as setTags,Be as setUser,ts as showReportDialog,ur as startTransaction,Tt as withScope,ss as wrap};
